## 前端探索之组件

### 为什么要用组件，不用行不行？

作为开发者，我们的任务是 **高效开发出高质量、满足需求的应用**。

技术在快速更新迭代，但软件设计的核心依然未变，组件化的目标就是在原生的基础上，通过 ***抽象、组合、分层*** 来完成 ***可拓展、易维护、高性能、可复用*** 的通用单元。从而提高效率，便于维护升级，提升应用体验。

那么，是不是所有业务都需要组件化？

当然不是，我们应该理性的分析当前环境，再来权衡是否需要组件化。

> 软件工程就是权衡的艺术。

### 组件不是银弹

> 如果组件化开发，增加了更多的复杂度，那么组件化是否还有意义？

例如一个登录界面，虽然简单但设计上各不相同，若将之组件化以满足各种需求，则需要配置的项就很多，远没有用原生写来的方便。

组件化所带来的复杂度，应该小于系统整体的复杂度，否则，就是一个不合理的组件。组件不是万能药，没有符合所有场景的标准。

抽象相对于复制粘贴，需要我们投入更多的精力，而且，如果设计的不友好，后期就会积累出复杂而混乱的代码，严重影响后期维护和拓展。抽象代码和复制哪个更合理，要取决于当前环境。

### 组件分层

组件开发需要把握两2个要点：

1. 服务开发（能复用、可拓展、易维护）
2. 服务业务（满足各种需求）

对于开发者，我们要简单易用、高效开发，对于业务需求，我们要满足高度灵活与自定义需求。

高效开发与用户体验灵活性的矛盾，我们应该怎样权衡？取决于当前业务需求及团队情况。

#### 分层

- 语言层
- 基础层
- 模块层
- 业务层

最小粒度的组件是语言层（原生），相当于无组件。比原生粒度稍大一些的是基础组件，仅仅实现UI样式或某个单一功能。如Input、Button等。

在基础组件的基础上，我们可以进一步组合、抽象，合成功能较齐全的通用模块组件或业务组件，不同的模块组件又可组合成通用业务组件。

分层设计应该根据业务需求，综合评估整个系统，根据通用功能、通用UI来设计。最好能有一套基础组件库，在此基础上去做设计开发。

#### 边界

原生语言层，是自由和灵活的，我们可以完成各种需求。但是，存在一定的重复性和复杂性，我们想要批量生产。这时候，我们通过分析、归纳，抽出公共部分，形成组件，以便快速开发和维护。当我们的抽离的公共部分越大的时候，我们要做的工作就越少，但是，我们会失去产品的多样性。

当我们需要灵活性的时候，我们设计出了给组件添加属性，既满足通用性也可以自己配置多样性的产品。但是，当属性越来越多的时候，我们又发现要学习组件的API以及如何配置属性是一项相当复杂的事情。当配置API的复杂度大于直接 原（复）生（制）开（粘）发（贴）的复杂度的时候，我们是否还会去使用组件呢？

我们要避免过度无意义的抽象，这样会降低开发效率。根据当前系统合理设计分层，可以很好的避免糟糕的抽象。

### 组件分类

1.组合型 VS 配置型

	// 组合型
	<Select defaultValue="compose">
	  <Select.Option value="compose">compose</Select.Option>
	  <Select.Option value="configs">configs</Select.Option>
	</Select>
	  
	// 配置型
	<Select defaultValue="configs" options={[{value:'configs'},{value:'compose'}]} />

优先级：组合型 > 配置型

2.受控型 VS 非受控

	// 受控型
	<Input value={value} onChange={change} />
	
	// 非受控
	<Input defaultValue={value} />

优先级：受控型 > 非受控

### 组件设计

软件开发是经验性的，当我们的知识深度和广度达到一定程度时，就会去思考其设计模式和底层实现，思考怎样更好的服务开发者和用户。

在组件设计中，我们可以制定设计规范，便于维护和迭代。如：

- UI规范化
- 分层标准化

也应遵循一些设计原则，除了 **单一原则** 、**开闭原则**，还有一些团队内自己定义的原则，如

- 整体把控，分层设计。

当一个组件的配置项过多时，相当于函数的参数过多。函数式编程里面的做法是柯里化为只有一个参数的高阶函数，组件设计亦可如此，可将其拆分为高阶组件，再组合成我们需要的组件。

在我们的开发过程中，会经常遇到设计不足和过度设计的情况。怎样把握好设计边界，需要我们用自身的经验和对当前环境的思考，反复实践，权衡出最优设计方案。

技术迭代虽快，但初衷不曾改变。要记住，思想永远比技术有意义。






